import tkinter as tk
import re
from tkinter import filedialog

class student_obj:
    def reset(obj):
        obj.student_number
        obj.student_name
        obj.student_sex
        obj.student_age

def open_student_file():
    windows = tk.Tk()
    windows.withdraw()
    file_path = filedialog.askopenfilename()

    return file_path

def get_student_info():
    file = open(open_student_file(), 'r')
    student_list = file.readlines()
    return student_list

def add_student_to_joseph():
    student_joseph_list = []
    student_temporary = get_student_info()
    for student_element in student_temporary:
        student_subelement = re.findall('\S* ', student_element)
        
        student_joseph_opject = student_obj()

        student_joseph_opject.student_number = student_subelement[0]
        student_joseph_opject.student_name = student_subelement[1]
        student_joseph_opject.student_sex = student_subelement[2]
        student_joseph_opject.student_age = student_subelement[3]

        student_joseph_list.append(student_joseph_opject.__dict__)

    return student_joseph_list

def joseph_solution(
        joseph_student_list, joseph_num_all, 
        joseph_student_delete):
    assert(joseph_student_delete > 0)
    
    num_temporary = 0
    print("学生总数量: ", len(joseph_student_list))
    while True:
        if len(joseph_student_list) > 1:
            num_temporary = ((joseph_student_delete 
                              - 1 
                              + num_temporary) 
                              % len(joseph_student_list))
            #joseph_student_list[num_temporary].__del__()
            print("被淘汰的学生信息：" + str(joseph_student_list[num_temporary]))
            del joseph_student_list[num_temporary]
        else:
            break;
    print("最后留下的学生信息：" + str(joseph_student_list[0]))

    return joseph_student_list[0]

if __name__ == '__main__':
    i = 0
    student_obj = add_student_to_joseph()
    joseph_solution(student_obj, len(student_obj), 3)

